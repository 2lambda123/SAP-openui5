<!DOCTYPE html>
<html style="height: 100%;">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' 'unsafe-eval';"/>
	<title>SAPUI5 Navigation</title>
	<script>

		var sSampleId = new window.URLSearchParams(window.location.search).get('sap-ui-xx-sample-id'),
			sSamplePath = new window.URLSearchParams(window.location.search).get('sap-ui-xx-sample-path'),
			sOrigin = new window.URLSearchParams(window.location.search).get('sap-ui-xx-sample-origin'),
			sVersion = new window.URLSearchParams(window.location.search).get('sap-ui-xx-sample-version'),
			sOriginEncoded,
			oBaseTag,
			oScriptTag,
			oPath = {};

		if (!sOrigin || sOrigin == ".") {
			sOrigin = window.location.origin + (window.location.pathname.includes("testsuite") ? "/testsuite" : "");
		} else {
			sOrigin = new URL(sOrigin, document.baseURI).pathname + sVersion;
		}

		sOriginEncoded = encodeURI(sOrigin);

		oPath[sSampleId.replace(/\./g, "/")] = encodeURI(sSamplePath);
		oPath["sap/ui/demo/mock"] = sOriginEncoded + "/test-resources/sap/ui/documentation/sdk";
		oPath["test-resources/sap/ui/documentation/sdk"] = ".";
		oPath["sap/uxap/sample"] = sOriginEncoded + "/test-resources/sap/uxap/demokit/sample";

		oBaseTag = document.createElement("base");
		oBaseTag.setAttribute("href", sOriginEncoded + "/");
		document.head.appendChild(oBaseTag);

		oScriptTag = document.createElement("script");
		oScriptTag.setAttribute("src", sOriginEncoded + "/resources/sap-ui-core.js");
		oScriptTag.setAttribute("id", "sap-ui-bootstrap");
		oScriptTag.setAttribute("data-sap-ui-compatVersion", "edge");
		oScriptTag.dataset.sapUiAsync = true;
		oScriptTag.dataset.sapUiLibs = "sap.m";
		oScriptTag.dataset.sapUiResourceroots = JSON.stringify(oPath);

		document.write(oScriptTag.outerHTML);

	</script>
</head>
<body class="sapUiBody sapUiSizeCompact" id="content">
<script>
	sap.ui.getCore().attachInit(function () {
		sap.ui.require([
			"sap/ui/core/ComponentContainer"
		], function (ComponentContainer) {

			sap.ui.loader.config({
				paths: oPath
			});

			var oContainer = new ComponentContainer({
				name : sSampleId,
				height : "100%",
				manifest: false
			}).placeAt('content');

		});
	});
</script>
</body>
</html>
